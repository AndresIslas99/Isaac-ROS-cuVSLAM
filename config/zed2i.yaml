# =============================================================================
# ZED 2i Camera Configuration — Dual-Purpose (Preview + Recording)
# =============================================================================
# HD1080 + NEURAL depth for maximum quality during recording.
# cuVSLAM handles positional tracking; ZED's internal VO runs for
# IMU fusion and rolling shutter correction only.
# =============================================================================

/**:
  ros__parameters:
    general:
      camera_model: 'zed2i'
      camera_name: 'zed'
      grab_resolution: 'HD1080'   # 1920x1080 — highest for recording
      grab_frame_rate: 30
      pub_resolution: 'NATIVE'
      gpu_id: 0

    video:
      brightness: 4
      contrast: 4
      hue: 0
      saturation: 4
      sharpness: 4
      gamma: 8
      auto_exposure_gain: true
      exposure: 100
      gain: 100
      auto_whitebalance: true
      publish_gray: true           # Required for cuVSLAM stereo input
      publish_left_right: true     # Publish left + right for stereo
      publish_raw: false

    depth:
      depth_mode: 'PERFORMANCE'         # Best quality for recording (34fps on Orin)
      depth_stabilization: 50
      min_depth: 0.3
      max_depth: 10.0
      openni_depth_mode: false
      point_cloud_freq: 15.0       # Reduce PC rate to save GPU for nvblox
      confidence_threshold: 50     # Balance noise vs coverage
      texture_confidence_threshold: 100  # Strictest texture confidence

    pos_tracking:
      pos_tracking_enabled: true   # Needed for IMU fusion / rolling shutter
      publish_tf: false            # cuVSLAM handles odom->base_link TF
      publish_map_tf: false        # No ZED map->odom
      area_memory: false           # No ZED loop closure
      two_d_mode: true             # Ground robot
      set_gravity_as_origin: true

    sensors:
      publish_imu_tf: true
      sensors_image_sync: false
      sensors_pub_rate: 400.0      # Full IMU rate for cuVSLAM

    svo_compression: 'H265'        # SVO recording compression

    streaming:
      stream_enabled: false

    object_detection:
      od_enabled: false

    body_tracking:
      bt_enabled: false

    # QoS
    qos_overrides:
      depth:
        reliability: 'RELIABLE'
        durability: 'VOLATILE'
        depth: 10
      image:
        reliability: 'RELIABLE'
        durability: 'VOLATILE'
        depth: 10
      imu:
        reliability: 'BEST_EFFORT'
        durability: 'VOLATILE'
        depth: 100
