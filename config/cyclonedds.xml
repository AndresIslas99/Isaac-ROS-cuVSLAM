<?xml version="1.0" encoding="UTF-8"?>
<!--
  CycloneDDS Configuration for AGV SLAM Pipeline â€” Production Grade

  Why CycloneDDS over FastDDS:
  - Better handling of large messages (images, point clouds)
  - Lower latency for intra-process communication
  - More predictable QoS behavior

  Set in environment:
    export RMW_IMPLEMENTATION=rmw_cyclonedds_cpp
    export CYCLONEDDS_URI=file:///path/to/this/cyclonedds.xml
-->
<CycloneDDS xmlns="https://cdds.io/config"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="https://cdds.io/config https://raw.githubusercontent.com/eclipse-cyclonedds/cyclonedds/master/etc/cyclonedds.xsd">
  <Domain id="any">
    <General>
      <AllowMulticast>default</AllowMulticast>
      <MaxMessageSize>65500B</MaxMessageSize>
      <FragmentSize>32768B</FragmentSize>
    </General>

    <Discovery>
      <LeaseDuration>30s</LeaseDuration>
      <MaxAutoParticipantIndex>120</MaxAutoParticipantIndex>
    </Discovery>

    <Internal>
      <!-- Production buffers: 26MB to match sysctl setting -->
      <SocketReceiveBufferSize min="26MB" />
      <Watermarks>
        <WhcHigh>500kB</WhcHigh>
      </Watermarks>
    </Internal>

    <Tracing>
      <OutputFile>/tmp/cyclonedds.log</OutputFile>
      <Verbosity>warning</Verbosity>
    </Tracing>
  </Domain>
</CycloneDDS>
